<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- VGP Garden Drinks | dismarzero.VGP.VGPGardenDrinks -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>VGP Garden Drinks</li>
    </mods>
      <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationAdd">
        <xpath>*/ThingDef[defName = "UniversalFermenter"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
          <value>
            <li>
              <thingDef>rum</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>VG_CaneMash</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>8</processDays>
            </li>
            <li>
              <thingDef>strawberrywine</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>CPD_WineMust</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>10</processDays>
            </li>
            <li>
              <thingDef>VG_AmbrosiaWine</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>VG_AmbrosiaMust</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>10</processDays>
            </li>
            <li>
              <thingDef>saki</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>CPD_RiceMash</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>7</processDays>
            </li>
            <li>
              <thingDef>CPD_VodkaPrecursor</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>RawPotatoes</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>6</processDays>
            </li>
            <li>
              <thingDef>tequila</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>VG_AgaveMust</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>9</processDays>
            </li>
            <li>
              <thingDef>whisky</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>CPD_CornWort</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>7</processDays>
            </li>
            <li>
              <thingDef>Fruitshine</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>VG_FruitMash</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>7</processDays>
            </li>
            <li>
              <thingDef>FruitKvass</thingDef>
              <ingredientFilter>
                  <thingDefs>
                      <li>VG_FruitKvassWort</li>
                  </thingDefs>
              </ingredientFilter>
              <maxCapacity>30</maxCapacity>
              <processDays>5</processDays>
            </li>
          </value>
        </li>
        <li Class="PatchOperationReplace">
        <xpath>*/ThingDef[defName = "VG_LargeFermentingBarrel"]/comps/li[@Class="Drinks.CompProperties_UniversalFermenter"]</xpath>
          <value>
            <li Class="UniversalFermenter.CompProperties_UniversalFermenter">
              <barOffset>(0.0, 0.5)</barOffset>
              <productIconSize>(2.0, 2.0)</productIconSize>
              <processes>
                <li>
                  <thingDef>Beer</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>Wort</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>150</maxCapacity>
                  <processDays>3.75</processDays>
                </li>
                <li>
                  <thingDef>rum</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>VG_CaneMash</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>6</processDays>
                </li>
                <li>
                  <thingDef>strawberrywine</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>CPD_WineMust</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>7.5</processDays>
                </li>
                <li>
                  <thingDef>VG_AmbrosiaWine</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>VG_AmbrosiaMust</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>7.5</processDays>
                </li>
                <li>
                  <thingDef>saki</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>CPD_RiceMash</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>5.25</processDays>
                </li>
                <li>
                  <thingDef>CPD_VodkaPrecursor</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>RawPotatoes</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>4.5</processDays>
                </li>
                <li>
                  <thingDef>tequila</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>VG_AgaveMust</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>6.25</processDays>
                </li>
                <li>
                  <thingDef>whisky</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>CPD_CornWort</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>5.25</processDays>
                </li>
                <li>
                  <thingDef>Fruitshine</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>VG_FruitMash</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>5.25</processDays>
                </li>
                <li>
                  <thingDef>FruitKvass</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>VG_FruitKvassWort</li>
                    </thingDefs>
                  </ingredientFilter>
                  <maxCapacity>120</maxCapacity>
                  <processDays>3.75</processDays>
                </li>
              </processes>
            </li>
          </value>
        </li>
        <li Class="PatchOperationReplace">
        <xpath>*/ThingDef[defName = "VG_LargeFermentingBarrel"]/graphicData/texPath</xpath>
          <value>
            <texPath>Things/Building/Production/UF_Barrel</texPath>
          </value>
        </li>
        <li Class="PatchOperationAdd">
        <xpath>*/ThingDef[defName = "VG_LargeFermentingBarrel"]/graphicData</xpath>
          <value>
            <shaderType>CutoutComplex</shaderType>
          </value>
        </li>
        <li Class="PatchOperationAdd">
        <xpath>*/ThingDef[defName = "VG_LargeFermentingBarrel"]</xpath>
          <value>
            <thingClass>UniversalFermenter.Building_ColorCoded</thingClass>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/WorkGiverDef[defName = "VG_WorkGiver_TakeProductOutOfUniversalFermenter" or defName = "VG_WorkGiver_FillUniversalFermenter"]</xpath>
        </li>
        <li Class="PatchOperationFindMod">
          <mods>
            <li>VGP Vegetable Garden</li>
          </mods>
          <match Class="PatchOperationSequence">
            <operations>
              <li Class="PatchOperationAdd">
              <xpath>*/ThingDef[defName = "UniversalFermenter"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
                <value>
                  <li>
                    <thingDef>cider</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_CiderMust</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>30</maxCapacity>
                    <processDays>6</processDays>
                  </li>
                  <li>
                    <thingDef>Mead</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_MeadBase</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>40</maxCapacity>
                    <processDays>6</processDays>
                  </li>
                  <li>
                    <thingDef>BrownAle</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_BrownMalt</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>30</maxCapacity>
                    <processDays>6</processDays>
                  </li>
                  <li>
                    <thingDef>KvassSoda</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_KvassSodaWort</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>30</maxCapacity>
                    <processDays>5</processDays>
                  </li>
                  <li>
                    <thingDef>VegetableKvass</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_VegKvassWort</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>30</maxCapacity>
                    <processDays>5</processDays>
                  </li>
                </value>
              </li>
              <li Class="PatchOperationAdd">
              <xpath>*/ThingDef[defName = "VG_LargeFermentingBarrel"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
                <value>
                  <li>
                    <thingDef>cider</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_CiderMust</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>120</maxCapacity>
                    <processDays>5.5</processDays>
                  </li>
                  <li>
                    <thingDef>Mead</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_MeadBase</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>120</maxCapacity>
                    <processDays>6</processDays>
                  </li>
                  <li>
                    <thingDef>BrownAle</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_BrownMalt</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>150</maxCapacity>
                    <processDays>5.5</processDays>
                  </li>
                  <li>
                    <thingDef>KvassSoda</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_KvassSodaWort</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>120</maxCapacity>
                    <processDays>3.75</processDays>
                  </li>
                  <li>
                    <thingDef>VegetableKvass</thingDef>
                    <ingredientFilter>
                        <thingDefs>
                            <li>VG_VegKvassWort</li>
                        </thingDefs>
                    </ingredientFilter>
                    <maxCapacity>120</maxCapacity>
                    <processDays>3.75</processDays>
                  </li>
                </value>
              </li>
              <li Class="PatchOperationFindMod">
                <mods>
                  <li>Vanilla Factions Expanded - Medieval</li>
                </mods>
                <nomatch Class="PatchOperationSequence">
                  <operations>
                    <li Class="PatchOperationAdd">
                    <xpath>*/ThingDef[defName = "UniversalFermenter"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
                      <value>
                        <li>
                          <thingDef>Wine</thingDef>
                          <ingredientFilter>
                              <thingDefs>
                                  <li>VG_GrapeMust</li>
                              </thingDefs>
                          </ingredientFilter>
                          <maxCapacity>30</maxCapacity>
                          <processDays>10</processDays>
                        </li>
                      </value>
                    </li>
                    <li Class="PatchOperationAdd">
                    <xpath>*/ThingDef[defName = "VG_LargeFermentingBarrel"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
                      <value>
                        <li>
                          <thingDef>Wine</thingDef>
                          <ingredientFilter>
                              <thingDefs>
                                  <li>VG_GrapeMust</li>
                              </thingDefs>
                          </ingredientFilter>
                          <maxCapacity>120</maxCapacity>
                          <processDays>7.5</processDays>
                        </li>
                      </value>
                    </li>
                  </operations>
                </nomatch>
              </li>
            </operations>
          </match>
        </li>
      </operations>
    </match>
  </Operation>

  <!-- [1.1] Ceramics | n7huntsman.ceramics -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>[1.1] Ceramics</li>
    </mods>
      <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "Building_DryingRack"]/comps/li[@Class="CompProperties_TemperatureRuinable" or @Class="Ceramics.CompProperties_Processing"]</xpath>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>*/ThingDef[defName = "Building_DryingRack"]/comps</xpath>
          <value>
            <li Class="UniversalFermenter.CompProperties_UniversalFermenter">
              <processes>
                <li>
                  <thingDef>N7_DriedMudbrick</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>N7_RawMudbrick</li>
                    </thingDefs>
                  </ingredientFilter>
                  <temperatureSafe>-1.0~60.0</temperatureSafe>
                  <temperatureIdeal>7.0~45.0</temperatureIdeal>
                  <maxCapacity>35</maxCapacity>
                  <processDays>0.67</processDays>
                </li>
              </processes>
            </li>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "Building_PrimitiveKiln" or defName = "Building_BasicKiln" or defName = "Building_ElectricKiln"]/comps/li[@Class="Ceramics.CompProperties_Processing"]</xpath>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>*/ThingDef[defName = "Building_PrimitiveKiln"]/comps</xpath>
          <value>
            <li Class="UniversalFermenter.CompProperties_UniversalFermenter">
              <processes>
                <li>
                  <thingDef>N7_FiredBrick</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>N7_UnfiredBrick</li>
                    </thingDefs>
                  </ingredientFilter>
                  <usesTemperature>false</usesTemperature>
                  <maxCapacity>30</maxCapacity>
                  <processDays>0.75</processDays>
                </li>
              </processes>
            </li>
          </value>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>*/ThingDef[defName = "Building_BasicKiln"]/comps</xpath>
          <value>
            <li Class="UniversalFermenter.CompProperties_UniversalFermenter">
              <processes>
                <li>
                  <thingDef>N7_FiredBrick</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>N7_UnfiredBrick</li>
                    </thingDefs>
                  </ingredientFilter>
                  <usesTemperature>false</usesTemperature>
                  <maxCapacity>50</maxCapacity>
                  <processDays>0.67</processDays>
                </li>
              </processes>
            </li>
          </value>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>*/ThingDef[defName = "Building_ElectricKiln"]/comps</xpath>
          <value>
            <li Class="UniversalFermenter.CompProperties_UniversalFermenter">
              <processes>
                <li>
                  <thingDef>N7_FiredBrick</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>N7_UnfiredBrick</li>
                    </thingDefs>
                  </ingredientFilter>
                  <usesTemperature>false</usesTemperature>
                  <maxCapacity>80</maxCapacity>
                  <processDays>0.57</processDays>
                </li>
              </processes>
            </li>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "Building_DryingRack" or defName = "Building_PrimitiveKiln" or defName = "Building_BasicKiln" or defName = "Building_ElectricKiln"]/thingClass</xpath>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/WorkGiverDef[defName = "UnloadKiln" or defName = "LoadKiln"]</xpath>
        </li>
      </operations>
      </match>
  </Operation>

  <!-- RimBees | sarg.rimbees-->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>RimBees</li>
    </mods>
      <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationAdd">
        <xpath>*/ThingDef[defName = "UniversalFermenter"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
          <value>
            <li>
              <thingDef>RB_Mead</thingDef>
              <ingredientFilter>
                <thingDefs>
                  <li>RB_Must</li>
                </thingDefs>
              </ingredientFilter>
              <processDays>6</processDays>
            </li>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "RB_MeadFermentingBarrel"]/designationCategory</xpath>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/WorkGiverDef[defName = "RB_TakeBeerOutOfFermentingBarrel" or defName = "RB_FillMeadFermentingBarrel"]</xpath>
        </li>
      </operations>
      </match>
  </Operation>

  <!-- Simple Chains: Lumber | Owlchemist.SimpleChains.Lumber-->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Simple Chains: Lumber</li>
    </mods>
      <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "Owl_WoodDryingRack"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]</xpath>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>*/ThingDef[defName = "Owl_WoodDryingRack"]/comps</xpath>
          <value>
            <li Class="UniversalFermenter.CompProperties_UniversalFermenter">
              <processes>
                <li>
                  <thingDef>WoodLog</thingDef>
                  <ingredientFilter>
                    <thingDefs>
                      <li>Owl_GreenLumber</li>
                    </thingDefs>
                  </ingredientFilter>
                  <usesTemperature>false</usesTemperature>
                  <maxCapacity>45</maxCapacity>
                  <processDays>0.67</processDays>
                  <sunFactor>
                    <min>0.4</min>
                    <max>1.0</max>
                  </sunFactor>
                  <rainFactor>
                    <min>1</min>
                    <max>0</max>
                  </rainFactor>
                  <snowFactor>
                    <min>1</min>
                    <max>0</max>
                  </snowFactor>
                  <windFactor>
                    <min>0.8</min>
                    <max>1.0</max>
                  </windFactor>
                  <graphicSuffix>_full</graphicSuffix>
                </li>
              </processes>
            </li>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <xpath>*/WorkGiverDef[defName = "UF_WorkGiver_TakeProductOutOfUniversalFermenter"]/giverClass</xpath>
          <value>
            <giverClass>UniversalFermenter.WorkGiver_TakeProductOutOfUF</giverClass>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <xpath>*/WorkGiverDef[defName = "UF_WorkGiver_FillUniversalFermenter"]/giverClass</xpath>
          <value>
            <giverClass>UniversalFermenter.WorkGiver_FillUF</giverClass>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <xpath>*/JobDef[defName = "FillUniversalFermenter"]/driverClass</xpath>
          <value>
            <driverClass>UniversalFermenter.JobDriver_FillUF</driverClass>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <xpath>*/JobDef[defName = "TakeProductOutOfUniversalFermenter"]/driverClass</xpath>
          <value>
            <driverClass>UniversalFermenter.JobDriver_TakeProductOutOfUF</driverClass>
          </value>
        </li>
      </operations>
      </match>
  </Operation>

<!-- Vanilla Factions Expanded - Medieval | OskarPotocki.VanillaFactionsExpanded.MedievalModule -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Vanilla Factions Expanded - Medieval</li>
    </mods>
      <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "VFEM_WineBarrel"]/designationCategory</xpath>
        </li>
        <li Class="PatchOperationAdd">
        <xpath>*/ThingDef[defName = "UniversalFermenter"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
          <value>
            <li>
              <thingDef>VFEM_Wine</thingDef>
              <ingredientFilter>
                <thingDefs>
                  <li>VFEM_Must</li>
                </thingDefs>
              </ingredientFilter>
              <maxCapacity>10</maxCapacity>
              <usesQuality>true</usesQuality>
              <qualityDays>(1, 3, 8, 14, 20, 50, 120)</qualityDays>
            </li>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/WorkGiverDef[defName = "VFEM_TakeBeerOutOfWineBarrel" or defName = "VFEM_FillWineBarrel"]</xpath>
        </li>
      </operations>
      </match>
  </Operation>

<!-- Vanilla Factions Expanded - Settlers | OskarPotocki.VanillaFactionsExpanded.SettlersModule -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Vanilla Factions Expanded - Settlers</li>
    </mods>
      <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationRemove">
          <xpath>*/ThingDef[defName = "Building_ChemshineBarrel"]/designationCategory</xpath>
        </li>
        <li Class="PatchOperationAdd">
        <xpath>*/ThingDef[defName = "UniversalFermenter"]/comps/li[@Class="UniversalFermenter.CompProperties_UniversalFermenter"]/processes</xpath>
          <value>
            <li>
              <thingDef>Chemshine</thingDef>
              <ingredientFilter>
                <thingDefs>
                  <li>Chemfuel</li>
                </thingDefs>
              </ingredientFilter>
              <processDays>3</processDays>
              <maxCapacity>50</maxCapacity>
              <efficiency>0.5</efficiency>
            </li>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <xpath>*/WorkGiverDef[defName = "TakeChemshineOutOfChemshineBarrel" or defName = "FillChemshineBarrel"]</xpath>
        </li>
      </operations>
      </match>
  </Operation>

</Patch>